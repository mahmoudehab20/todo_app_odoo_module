<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="task_report" model="ir.actions.report">
        <field name="name">Task Report</field>
        <field name="model">todo.task</field>
        <field name="report_type">qweb-html</field>
        <field name="report_name">todo_app.task_report_template</field>
        <field name="binding_model_id" ref="model_todo_task"/>
        <field name="binding_type">report</field>
    </record>

    <template id="task_report_template">
        <t t-call="web.html_container">
                <t t-foreach="docs" t-as="rec">
                <meta charset="UTF-8"/>
                    <style>
                        ul{
                            list-style-type:none;
                            margin-left:0px;
                            margin-top:0px;
                            padding:0px;
                        }
                        img{
                            width:50px;
                            hieght:50px;
                            margin-left:0px;
                            margin-top:0px;
                            padding:0px;
                        }
                        .main{
                            font-weight:bold;
                        }
                        #data{
                            padding:5px;
                            width:50%;
                        }
                        #timesheet{
                            width:100%;
                            border-collapse:collapse;
                            padding:5px;
                            border:2px solid black;
                            text-align:center;
                        }
                        #timesheet th{
                            padding:2px;
                            border:2px solid black;
                            text-align:center;
                        }
                        #timesheet td{
                            padding:2px;
                            border:2px solid black;
                            text-align:center;
                        }
                    </style>
                    <img src="https://imgs.search.brave.com/JZw0_MWeWhZKu0hNBODzNpuy8UGoOuoN3fIbjjVM1w4/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly9jZG4u/bW9zLmNtcy5mdXR1/cmVjZG4ubmV0L1Qy/WlRiSzZSV0JIenFU/ZlhyQ0Z1NTYtMzIw/LTgwLmpwZw"/>
                    <hr/>
                    <ul>
                        <li><t t-esc="rec.env.user.partner_id.company_name"/></li>
                        <li><t t-esc="rec.env.user.partner_id.street"/>,<t t-esc="rec.env.user.partner_id.city"/></li>
                        <li><t t-esc="rec.env.user.partner_id.country_id.name"/></li>
                    </ul>
                    <table id="data">
                        <tbody>
                            <tr>
                                <td class="main">TASK:</td>
                                <td><t t-esc="rec.name"/></td>
                            </tr>
                            <tr>
                                <td class="main">Due Date:</td>
                                <td><t t-esc="rec.due_date"/></td>
                            </tr>
                            <tr>
                                <td class="main">Assign To:</td>
                                <td><t t-esc="rec.assign_to_id.name"/></td>
                            </tr>
                            <tr>
                                <td class="main">Estimated Time(hr):</td>
                                <td><t t-esc="rec.estimated_time"/></td>
                            </tr>
                            <tr>
                                <td colspan="2" class="main">Description:</td>
                            </tr>
                            <tr>
                                <td colspan="2"><t t-esc="rec.description"/></td>
                            </tr>
                        </tbody>
                    </table>
                    <table id="timesheet">
                        <thead ><th colspan="4">Timesheet</th></thead>
                        <tbody>
                            <t t-set="counter" t-value="0"/>
                            <t t-set="total_time" t-value="0"/>
                            <tr>
                                <th>#</th>
                                <th>Date</th>
                                <th>Description</th>
                                <th>time</th>
                            </tr>
                            <t t-foreach="rec.lines_ids" t-as="o">
                                <tr>
                                    <t t-set="counter" t-value="counter+1"/>
                                    <td><t t-esc="counter"/></td>
                                    <td><t t-esc="o.date"/></td>
                                    <td><t t-esc="o.description"/></td>
                                    <td><t t-esc="o.time"/> H</td>
                                    <t t-set="total_time" t-value="total_time + o.time"/>
                                </tr>
                            </t>
                            <tr>
                                <td colspan="3">Total Time </td>
                                <td><t t-esc="total_time"/> H</td>
                            </tr>
                        </tbody>
                    </table>
                </t>
        </t>
    </template>
</odoo>